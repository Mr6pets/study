<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>闭包</title>
    <script>
        /*
            1.什么是闭包
            2.闭包有什么好处？应用在哪里？
            3.闭包需要注意的地方？
        */
       //函数嵌套函数,内部函数可以引用外部函数的参数和变量，参数和变量不会被垃圾回收机制所收回=========================
        // function aaa(a){
        //     var b=5;
        //     function bbb(){
        //         alert(a);
        //         alert(b);
        //     }
        // }

       //js中的垃圾回收机制,以下例子中，aaaa中定义的变量a执行完aaaa后就会被垃圾回收机制给清除掉=====================================
        // function aaaa(){
        //     var a=1;
        // }
        // aaaa();

        //=============================================================================
        // function aaa(){
        //     var a=5;
        //     function bbb(){
        //         alert(a)
        //     }
        //     return bbb;
        // }
        // var c=aaa();
        // c()//5


        //闭包的好处
        // 1.希望长期驻扎在内存中
        // 2.避免全局污染
        //3.私有成员的存在

        //用法
        // 1.模块化代码
        // 2.在循环中直接找到对应元素的索引
            
            // 全局变量a设置======================================
        // var a=1;
        // function aaa(){
        //     a++;
        //     alert(a);
        // }
        // aaa();//2
        // aaa();//3

            // 局部变量a设置============================================
        // function bbb(){
        //     var a=1;
        //     a++;
        //     alert(a);
        // }
        // bbb();//2
        // bbb();//2

            // 闭包=>既让a是局部变量又让其可以累加=======================================
        // function aaa(){
        //     var a=5;
        //     return function(){
        //         a++;
        //         alert(a);
        //     }
        // }
        // var c=aaa();
        // c();//6
        // c();//7
        // alert(a)//这里报错 说明这个a是局部变量

        //题外话:函数声明，函数表达式==========================================================
        // function aaa(){
        //     alert(1);
        // }
        // aaa();

        // (function aaa(){
        //     alert(1);
        // })()
        // (function (){
        //     alert(1);
        // })()

        // ===========================================================
        // var aaa=(function(){
        //     var a=1;
        //     return function(){
        //         a++;
        //         alert(a);
        //     }
        // })()
        // aaa();//2
        // aaa();//3

        // 私有成员的存在=================================
        var aaa=(function(){
            var a=1;
            function bbb(){
                a++;
                alert(a);
            }
            function ccc(){
                a++;
                alert(a);
            }
            return{
                b:bbb,
                c:ccc
            }
        })()

        aaa.b()//2
        aaa.b()//3
        alert(a)//报错
        alert(bbb)//报错
    </script>
</head>
<body>
    
</body>
</html>